<html lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="The easiest way to save and share passwords. Remember and share everything from web accounts, credit cards, 2-factor backup codes, security question answers, and WiFi passwords.">
    <title>Mitro</title>

    <!--[if lte IE 8]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.css" /> -->
    <link href="../less/main-org.css" rel="stylesheet" media="screen">
  </head>
  <body>
    <div id="container">
      <div id="header"></div>
      <div id="wrapper">
        <div id="sidebar">
          <div class="sb-section" id="profile">
            <a href="https://www.mitro.co" class="icon-logo"></a>
            <div id="username">username</div>
          </div>
          <div class="sb-section" id="acct-nav">
            <ul>
              <li class="selected">
                <div class="acct-name">
                  <div class="nav-icon icon-user"></div><a href="index.html">Personal</a>
                </div>
                <ul class="acct-info">
                    <li class="selected"><a class="acct-secrets" href="index.html"><div class="nav-icon icon-vault"></div>Secrets</a></li>
                    <li><a class="acct-teams" href="personal-teams.html"><div class="nav-icon icon-vault2"></div>Teams</a></li>
                    <li><a class="acct-logs" href="personal-logs.html"><div class="nav-icon icon-bars"></div>Audit Logs</a></li>
                </ul>
              </li>
              <li>
                <div class="acct-name">
                  <div class="org-icon" style="background-color: yellowgreen;"></div><div class="nav-icon icon-users"></div><a href="index-org.html">Lectorius <span class="admin-tag">Admin<span></a>
                </div>
                <ul class="acct-info">
                    <li><a class="acct-home" href="index-org.html"><div class="nav-icon icon-home"></div>Overview</a></li>
                    <li><a class="acct-secrets" href="org-secrets.html"><div class="nav-icon icon-vault"></div>Secrets</a></li>
                    <li><a class="acct-members" href="org-members.html"><div class="nav-icon icon-usercircle"></div>Members</a></li>
                    <li><a class="acct-teams" href="org-teams.html"><div class="nav-icon icon-vault2"></div>Teams</a></li>
                    <li><a class="acct-logs" href="org-logs.html"><div class="nav-icon icon-bars"></div>Audit Logs</a></li>
                </ul>
              </li>
              <li>
                <div class="acct-name">
                  <div class="org-icon" style="background-color: pink;"></div><div class="nav-icon icon-users"></div><a href="main-org-user.html">Essence Digital</a>
                </div>
                <ul class="acct-info">
                    <li><a class="acct-secrets" href="main-org-user.html"><div class="nav-icon icon-vault"></div>Secrets</a></li>
                    <li><a class="acct-teams" href="org-user-teams.html"><div class="nav-icon icon-vault2"></div>Teams</a></li>
                </ul>
              </li>
              <li>
                <div class="acct-name">
                  <div class="nav-icon icon-users"></div>Stack Exchange
                </div>
                <ul class="acct-info">
                    <li><a class="acct-secrets" href="main-org-user.html"><div class="nav-icon icon-vault"></div>Secrets</a></li>
                    <li><a class="acct-teams" href="org-user-teams.html"><div class="nav-icon icon-vault2"></div>Teams</a></li>
                </ul>
              </li>
            </ul>
          </div>
          <div class="sb-section" id="tool-nav">
            <ul>
              <li><a href="import-secrets.html"><div class="nav-icon icon-download"></div>Import Secrets</a></li>
              <!--<li><div class="nav-icon icon-wrench"></div>Tools</li>-->
              <!--<li><a href="settings.html"><div class="nav-icon icon-gear"></div>Settings</a></li>-->
              <li><a href="feedback-form.html"><div class="nav-icon icon-bubble"></div>Feedback</a></li>
              <li><a href="mailto:inbound@mitro.co"><div class="nav-icon icon-question"></div>Help</a></li>
              <li><div class="nav-icon icon-switch"></div>Sign Out</li>
            </ul>
          </div>
          <div class="sb-section" id="policy-nav">
            <ul>
              <li><a href="privacy.html">Privacy Policy</a></li>
              <li><a href="terms.html">Terms of Service</a></li>
            </ul>
          </div>
        </div>
        <div id="content">
          <div id="content-header">
            <ul class="breadcrumb">
              <li><div class="nav-icon icon-vault"></div><a href="index-org.html">Secrets</a></li>
              <li class="secret-name"><img src="https://dt8kf6553cww8.cloudfront.net/static/images/dropbox_webclip-vflO8tEZ4.png" data-icon-text="Dropbox (usertest@yahoo.com)">Dropbox</li>
            </ul>
          </div>
          <div id="content-body">
            <div id="tabs">
              <ul>
                <li><a href="#tab-secret-settings"><div class="nav-icon icon-cogs"></div>Settings</a></li>
                <li><a href="#tab-secret-members"><div class="nav-icon icon-invitesolo"></div>Teams and Members</a></li>
              </ul>
              <div id="tab-secret-settings">
                <div class="tab-content">
                  <div class="form-wrapper">
                    <form id="edit-secret-form">
                      <div class="form-group web note">
                        <label>Secret Name</label>
                        <input type="text" name="name" placeholder="" value="Dropbox">
                      </div>
                      <div class="form-group web">
                        <label>Secret URL</label>
                        <input type="text" name="url" placeholder="" value="https://www.dropbox.com/login">
                      </div>
                      <div class="form-group web">
                        <label>Username</label>
                        <input type="text" name="username" placeholder="" value="usertest@yahoo.com">
                        <div class="form-action-btns"><div class="copy-btn"><div class="icon-copy"></div>Copy</div></div>
                      </div>
                      <div class="form-group web">
                        <label>Password</label>
                        <input type="text" name="password" placeholder="(password not shown)">
                        <div class="form-action-btns"><div class="copy-btn"><div class="icon-copy"></div>Copy</div><div class="show-btn"><div class="icon-eye"></div>Show</div></div>
                      </div>
                      <div class="form-group web note">
                        <label>Note</label>
                        <textarea name="note" placeholder="" rows="10"></textarea>
                      </div>
                      <button type="reset" class="reset"><a href="index-org.html">Cancel</a></button>
                      <button type="submit" class="submit">Save Changes</button>
                    </form>
                    <a class="text modal-link" href="#delete-modal">Delete Secret</a>
                  </div>
                </div>
              </div>
              <div id="tab-secret-members">
                <div class="tab-content">
                  <div class="sliding-checklist-wrapper">
                    <div class="sliding-checklist-content" id="left-checklist">
                      <div class="checklist-wrapper" id="remove-list-wrapper">
                      </div><!-- #remove-list-wrapper -->
                      <button id="add-teams-and-members" data-target-id="#right-checklist" class="slide-btn button-med"><div class="icon-plus"></div>Add Teams and Members</button>
                    </div>
                    <div class="sliding-checklist-content" id="right-checklist">
                      <button id="current-teams-and-members" data-target-id="#left-checklist" class="slide-btn button-med"><div class="icon-arrow-left"></div>Back to current teams and members</button>
                      <div class="checklist-wrapper" id="add-list-wrapper">
                      </div><!-- #add-list-wrapper -->
                    </div>
                  </div>
                </div>
              </div> <!-- /#tab-team-members -->
            </div>
          </div>
        </div>
      </div>
    </div>
    <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>-->
    <script src="../js/jquery.min.js"></script>
    <script src="../js/jquery-ui.min.js"></script>
    <script src="../js/mustache.js"></script>
    <script>
      $(function() {
        var getInitial = function() {
          return this.name.charAt(0).toUpperCase();
        }

        var hasUsers = function() {
          return ((this.users.length > 0) ? true : false);
        }

        var hasSecrets = function() {
          return ((this.secrets.length > 0) ? true : false);
        }

        var currentUserData = {
          title: "Shared with Teams and Members",
          teams: [
            {   name: "Sales",
                color: "rgb(188, 189, 34)"
            },
            {   name: "Management",
                color: "rgb(148, 103, 189)"
            }
          ],
          users: [
            {   name: "usertest+100@work.com",
                color: "rgb(188, 189, 34)"
            },
            {   name: "user@user.com",
                color: "rgb(148, 103, 189)"
            },
            {   name: "usertest@gmail.com",
                color: "rgb(31, 119, 180)"
            }
          ],
          searchText: "Search Current Teams and Members",
          listID: "remove-list",
          "initial": getInitial,
          "hasUsers": hasUsers
        };  

        var addUserData = {
          isAddUserList: true,
          title: "Add Teams and Members",
          teams: [
            {   name: "Another Team",
                color: "rgb(188, 189, 34)"
            },
            {   name: "Marketing",
                color: "rgb(148, 103, 189)"
            }
          ],
          users: [
            {   name: "usertest+100@work.com",
                color: "rgb(188, 189, 34)"
            },
            {   name: "user@user.com",
                color: "rgb(148, 103, 189)"
            },
            {   name: "usertest@gmail.com",
                color: "rgb(31, 119, 180)"
            },
            {   name: "usertest+100@work.com",
                color: "rgb(188, 189, 34)"
            },
            {   name: "user@user.com",
                color: "rgb(148, 103, 189)"
            },
            {   name: "usertest@gmail.com",
                color: "rgb(31, 119, 180)"
            },
            {   name: "usertest+100@work.com",
                color: "rgb(188, 189, 34)"
            },
            {   name: "user@user.com",
                color: "rgb(148, 103, 189)"
            },
            {   name: "usertest@gmail.com",
                color: "rgb(31, 119, 180)"
            },
            {   name: "usertest+100@work.com",
                color: "rgb(188, 189, 34)"
            },
            {   name: "user@user.com",
                color: "rgb(148, 103, 189)"
            },
            {   name: "usertest@gmail.com",
                color: "rgb(31, 119, 180)"
            }
          ],
          searchText: "Search for Teams and Members to Add",
          listID: "add-list",
          "initial": getInitial,
          "hasUsers": hasUsers
        };  

        $('#tabs').tabs();
        loadUsers('secret-team-member-list-template', 'remove-list-wrapper', currentUserData);
        loadUsers('secret-team-member-list-template', 'add-list-wrapper', addUserData);

        $('a[href="#tab-secret-members"]').click();

        // process the "add-user" selection
        $('.checkbox').click(function() {
            var $checkboxEl = $(this);
            var $checklistItem = $(this).parents('.item');
            var $checkboxInput = $checkboxEl.find('input[type="checkbox"]');
            if ($checkboxInput.is(':checked')) {
              $checkboxInput.prop('checked', false);
              $checkboxEl.removeClass('checked');
              $checklistItem.removeClass('selected');
            } else {
              $checkboxInput.prop('checked', true);
              $checkboxEl.addClass('checked');
              $checklistItem.addClass('selected');
            }
        });

        $('.action-btn').click(function(e) {
          e.preventDefault();
          var $thisBtn = $(this);
          var action = $thisBtn.data('action');
          var targetID = $thisBtn.data('target-id');
          var targetClass = $thisBtn.data('target-class');
          if (action && targetID && targetClass) {
            var $targetEl = $('#' + targetID);
            switch(action) {
              case 'reset':
                $targetEl.find('.' + targetClass + '.checked').trigger('click');
                break;
              case 'select':
                $targetEl.find('.' + targetClass).not('.checked').trigger('click');
                break;
            }
          }
        });

        $('#list-filter').change(function() {
          var $listToSort = $('#' + $(this).data('list')).find('.item-list');
          $(this).find(":selected").each(function() {
            var $selectedOption = $(this);
            if ($selectedOption.val() === 'all') {
              $listToSort.find($('.item')).show();
            } else if ($selectedOption.val() === 'selected') {
              $listToSort.find($('.item')).hide();
              $listToSort.find($('.item.selected')).show();
            } else if ($selectedOption.val() === 'unselected') {
              $listToSort.find($('.item')).hide();
              $listToSort.find($('.item').not('.selected')).show();
            }
          });
        });

        function loadUsers(templateID, elementID, data) {
          var template = $('#' + templateID).html();
          var userTemplate = $('#secret-member-item-template').html();
          var teamTemplate = $('#secret-team-item-template').html();
          var output = Mustache.render(template, data, {
              user: userTemplate,
              team: teamTemplate
          });
          $('#' + elementID).html(output);
        }

        $('.sliding-checklist-wrapper').on('click', '.slide-btn', function(e) {
          e.preventDefault();
          // get the button element that was clicked (a child element of the button may also trigger this click but we need the button element)
          var $buttonEl = $(e.target).parents('.sliding-checklist-content').find('.slide-btn');
          // get the button's target element - the left position of this element is used to determine the position of the animation for the wrapper element
          var $buttonTargetEl = $($buttonEl.attr('data-target-id'));
          // the wrapper element that is animated
          var $contentWrapperEl = $buttonEl.parents('.sliding-checklist-wrapper');

          $contentWrapperEl.animate({
              left: -($buttonTargetEl.position().left)
            }, 1000
          );
        });
      });
    </script>


    <script id="secret-team-member-list-template" type="text/html">
      <h3>{{ title }}</h3>
      {{#hasUsers}}
        <div id="search">
          <button id="search-btn"><div class="icon-search"></div></button>
          <input id="secret-filter-string" type="text" class="form-control search" placeholder="{{ searchText }}">
        </div>
        {{#isAddUserList}}
        <div class="select-wrapper">
          View:
          <select id="list-filter" data-list="add-list">
            <option value="all">All</option>
            <option value="selected">Selected</option>
            <option value="unselected">Unselected</option>
          </select>
        </div>
        {{/isAddUserList}}
        <div class="button-wrapper">
          <button class="button-sm button-light action-btn select-btn" data-action="select" data-target-id="{{#isAddUserList}}add-list{{/isAddUserList}}{{^isAddUserList}}remove-list{{/isAddUserList}}" data-target-class="checkbox">Select all</button>
          <button class="button-sm button-light action-btn reset-btn" data-action="reset" data-target-id="{{#isAddUserList}}add-list{{/isAddUserList}}{{^isAddUserList}}remove-list{{/isAddUserList}}" data-target-class="checkbox">Reset</button>
        </div>
        <ul class="item-list scroll-list checklist" id="{{ listID }}">
          <li class="item-divider">Teams</li>
          {{#teams}}
            {{> team}}
          {{/teams}}
          <li class="item-divider">Users</li>
          {{#users}}
            {{> user}}
          {{/users}}
        </ul>
        {{#isAddUserList}}<button id="add-members" class="button-med submit-btn" type="submit">Add Teams and Members</button>{{/isAddUserList}}
        {{^isAddUserList}}<button id="remove-members" class="button-med submit-btn" type="submit">Remove Teams and Members</button>{{/isAddUserList}}
      {{/hasUsers}}
      {{^hasUsers}}
        No members yet.
      {{/hasUsers}}
    </script>    

    <script id="secret-member-item-template" type="text/html">
      <li class="item" data-user-id="{{ name }}">
        <a class="item-icon user-icon-placeholder" href="user-info.html" title="{{ name }}" data-icon-text="{{ name }}" style="background-color: {{ color }}">{{ initial }}</a>
        <div class="item-info">
          <div class="item-name search-this-value">{{ name }}</div>
        </div>
        <ul class="item-actions">
          {{#isAddUserList}}
            <li>
              <div class="action-wrapper checkbox">
                <a class="action-icon icon-plus" href="#" title="Add Member" data-item-action="add" data-action-target="member"></a>
                <input id="checkbox60" name="member" type="checkbox">
              </div>
            </li>        
          {{/isAddUserList}}
          {{^isAddUserList}}
          <li>
              <div class="action-wrapper checkbox">
                <a class="action-icon icon-close" href="#" title="Remove Member" data-item-action="remove" data-action-target="member"></a>
                <input id="checkbox60" name="member" type="checkbox">
              </div>
          </li>
          {{/isAddUserList}}
        </ul>
      </li>
    </script>

    <script id="secret-team-item-template" type="text/html">
      <li class="item" data-user-id="{{ name }}">
        <a class="item-icon team-icon-placeholder" href="team-info.html" title="{{ name }}" data-icon-text="{{ name }}" style="background-color: {{ color }}">{{ initial }}</a>
        <div class="item-info">
          <div class="item-name search-this-value">{{ name }}</div>
        </div>
        <ul class="item-actions">
          <li>
            <a class="action-icon icon-edit" href="team-info.html" title="Edit Team" data-item-action="add" data-action-target="team"></a>
          </li>
          {{#isAddUserList}}
            <li>
              <div class="action-wrapper checkbox">
                <a class="action-icon icon-plus" href="#" title="Add Team" data-item-action="add" data-action-target="team"></a>
                <input id="checkbox60" name="member" type="checkbox">
              </div>
            </li>        
          {{/isAddUserList}}
          {{^isAddUserList}}
          <li>
              <div class="action-wrapper checkbox">
                <a class="action-icon icon-close" href="#" title="Remove Team" data-item-action="remove" data-action-target="team"></a>
                <input id="checkbox60" name="member" type="checkbox">
              </div>
          </li>
          {{/isAddUserList}}
        </ul>
      </li>
    </script>

  </body>
</html>